(this["webpackJsonpgnc-frontend"]=this["webpackJsonpgnc-frontend"]||[]).push([[3],{1:function(e,t,n){"use strict";n.r(t);var a,r,i,s,c,l,o,d,u=n(2),b=n.n(u),m=n(105),j=n.n(m),f=(n(282),n(43)),h=(n(283),n(284)),x=n(286),g=n(32),O=x.a.button.attrs({className:"flex flex-grow-0 py-2 px-4 ml-2 font-semibold rounded-lg shadow-md text-white bg-green-500 hover:bg-green-700"})(a||(a=Object(h.a)([""]))),p=x.a.header.attrs({className:"flex flex-auto"})(r||(r=Object(h.a)(["\n    height: 17vh;\n"]))),v=x.a.footer.attrs({className:"flex flex-auto "})(i||(i=Object(h.a)(["\n    height: 3vh;\n    min-height: 35px;\n"]))),w=x.a.span.attrs({className:"flex text-white text-3xl object-center font-bold pl-2 pt-1"})(s||(s=Object(h.a)([""]))),y=x.a.span.attrs({className:"bg-clip-text text-transparent bg-gradient-to-r from-green-400 to-blue-500"})(c||(c=Object(h.a)(["\n    line-height: 15vh;\n"]))),N=x.a.input.attrs({className:"text-green-900 rounded-lg shadow-md border-2 border-green-500"})(l||(l=Object(h.a)([""]))),C=x.a.div.attrs({className:"flex flex-auto container w-full lg:w-1/3 p-2"})(o||(o=Object(h.a)(["\n    height: 80vh;\n"]))),k=x.a.div.attrs({className:"flex flex-auto w-full h-full bg-white rounded-xl shadow-md overflow-hidden"})(d||(d=Object(h.a)([""])));function S(e){return Object(g.jsx)(C,{children:Object(g.jsx)(k,{children:Object(g.jsxs)("div",{className:"flex flex-auto flex-col h-full",children:[Object(g.jsxs)("div",{className:"flex flex-grow-0 flex-row p-2 bg-green-600",children:[e.left,Object(g.jsx)("div",{className:"flex flex-grow"}),e.right]}),Object(g.jsx)("div",{className:"flex flex-auto flex-row p-2",children:e.content})]})})})}var F=n(555),T=n(552);function G(e){var t=Object(u.useRef)(null),n=Object(u.useState)(null),a=Object(f.a)(n,2),r=a[0],i=a[1];return Object(u.useEffect)((function(){var n=t.current.getBoundingClientRect(),a=n.width,s=n.height;if(r)r.data(e.data),r.render(),r.fitView();else{var c=new T.a.Tooltip({offsetX:10,offsetY:20,getContent:function(e){var t=document.createElement("div");t.style.width="180px";var n="<h4><b>".concat(e.item.getModel().label,"</b></h4>");if(e.item.getModel().attrs){var a=e.item.getModel().attrs;for(var r in n+="<ul>",a)n+="<li><b> - ".concat(r,":</b> ").concat(a[r],"</li>");n+="</ul>"}return t.innerHTML=n,t},itemTypes:["node"]}),l=new T.a.TreeGraph({container:j.a.findDOMNode(t.current),width:a,height:s,linkCenter:!0,modes:{default:[{type:"collapse-expand",onChange:function(e,t){return e.getModel().collapsed=t,!0}},"drag-canvas","zoom-canvas"]},defaultNode:{size:26,anchorPoints:[[0,.5],[1,.5]]},defaultEdge:{type:"cubic-vertical"},layout:{type:"compactBox",direction:"TB",getId:function(e){return e.id},getHeight:function(){return 16},getWidth:function(){return 16},getVGap:function(){return 80},getHGap:function(){return 50}},plugins:[c]});l.node((function(e){var t="right",n=0;return e.children||(t="bottom",n=Math.PI/2),{style:{fill:"#ECFDF5",stroke:"#34D399"},label:e.label,labelCfg:{position:t,offset:5,style:{rotate:n,textAlign:"start"}}}})),l.data(e.data),l.render(),l.fitView(),i(l)}}),[r,e.data]),Object(g.jsx)("div",{style:{display:"flex",flex:"1 1 auto"},ref:t})}var B=n(263),E=n(553);function L(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}function W(e){var t=e.options,n=Object(u.useState)(e.defaultOption),a=Object(f.a)(n,2),r=a[0],i=a[1];return Object(g.jsx)(B.b,{value:r,onChange:function(t){i(t);var n=e.onChange;null===n||void 0===n||n(t)},children:function(n){var a=n.open;return Object(g.jsxs)("div",{className:"relative",children:[Object(g.jsxs)(B.b.Button,{className:L(e.widthClass,"relative h-full bg-white border border-gray-300 rounded-lg shadow-sm pl-2 pr-12 py-2 text-left cursor-default focus:outline-none focus:ring-1 focus:ring-green-500 focus:border-green-500 sm:text-sm"),children:[Object(g.jsx)("span",{className:"flex items-center",children:Object(g.jsx)("span",{className:"ml-3 block truncate",children:r.name})}),Object(g.jsx)("span",{className:"ml-3 absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none",children:Object(g.jsx)(E.b,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})})]}),Object(g.jsx)(B.c,{show:a,as:u.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:Object(g.jsx)(B.b.Options,{static:!0,className:"absolute z-10 mt-1 w-full bg-white shadow-lg max-h-56 rounded-lg py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none sm:text-sm",children:t.map((function(e){return Object(g.jsx)(B.b.Option,{className:function(e){return L(e.active?"text-white bg-green-600":"text-gray-900","cursor-default select-none relative py-2 pl-3 pr-9")},value:e,children:function(t){var n=t.selected,a=t.active;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{className:"flex items-center",children:Object(g.jsx)("span",{className:L(n?"font-semibold":"font-normal","ml-3 block truncate"),children:e.name})}),n?Object(g.jsx)("span",{className:L(a?"text-white":"text-green-600","absolute inset-y-0 right-0 flex items-center pr-4"),children:Object(g.jsx)(E.a,{className:"h-5 w-5","aria-hidden":"true"})}):null]})}},e.id)}))})})]})}})}var A=n(554);function I(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}function R(e){var t=e.visible,n=Object(u.useRef)(null),a=function(t){var n=e.onClose;null===n||void 0===n||n(t)};return Object(g.jsx)(B.c.Root,{show:t,as:u.Fragment,children:Object(g.jsx)(B.a,{as:"div",static:!0,className:"fixed z-10 inset-0 overflow-y-auto",initialFocus:n,open:t,onClose:a,children:Object(g.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[Object(g.jsx)(B.c.Child,{as:u.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:Object(g.jsx)(B.a.Overlay,{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),Object(g.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"\u200b"}),Object(g.jsx)(B.c.Child,{as:u.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:Object(g.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[Object(g.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:Object(g.jsxs)("div",{className:"sm:flex sm:items-start",children:[Object(g.jsx)("div",{className:I("mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full sm:mx-0 sm:h-10 sm:w-10",e.isWarning?"bg-yellow-100":"bg-red-100"),children:Object(g.jsx)(A.a,{className:I("h-6 w-6",e.isWarning?"text-yellow-600":"text-red-600"),"aria-hidden":"true"})}),Object(g.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[Object(g.jsx)(B.a.Title,{as:"h3",className:"text-lg leading-6 font-medium text-gray-900",children:e.title}),Object(g.jsx)("div",{className:"mt-2",children:Object(g.jsx)("div",{className:"text-sm text-gray-500",children:Object(g.jsx)("pre",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word"},children:e.content})})})]})]})}),Object(g.jsx)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:Object(g.jsx)("button",{type:"button",className:I("mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",e.isWarning?"focus:ring-yellow-500":"focus:ring-red-500"),onClick:function(){return a(!1)},ref:n,children:"OK"})})]})})]})})})}var M=n(562),P=n(549);var D=[{id:1,name:"Basic",code:"int main() {\n    return 0;\n}"},{id:2,name:"Unary",code:"int neg_unary() {\n    int a = -2;\n    return -a;\n}\n\nint not_unary() {\n    int a = 1;\n    return ~a;\n}\n\nint complement_unary() {\n    int b = !0;\n    int a = !23;\n    return !b;\n}\n"},{id:3,name:"Binary",code:"int add() {\n    int a = 2 + 2;\n    return a;\n}\n\nint mul() {\n    int a = 1 + 3 * 4 - 2;\n    return a + 1;\n}\n\nint div() {\n    int b = 2;\n    int a = 3 / b;\n    return b;\n}"},{id:4,name:"If Condition",code:"int main() {\n    int a = 0;\n    int b = 1;\n\n    if (a > b) {\n        return 1;\n    } else if (a < b) {\n        return 2;\n    } else {\n        return 3;\n    }\n}"},{id:5,name:"For Loop",code:"int main() {\n    int b = 255;\n\n    for (int i = 0; i < b; i += 1) {\n        b -= 1;\n    }\n    return 0;\n}\n"},{id:6,name:"While Loop",code:"int main() {\n    int a = 0;\n    int b = 30;\n    int c = 10;\n\n    do {\n        c = b - c;\n    } while (c >= 0);\n\n    while (a < b) {\n        a += 1;\n        b -= 1;\n\n        if (b == 3)\n            break;\n    }\n\n    return 0;\n}"},{id:7,name:"Functions",code:"\nint foo(int a, int b) {\n    return a + b;\n}\n\nint main() {\n    return foo(0, 1);\n}\n\nint bar(int a, int b, int c) {\n    int rst = 0;\n    while (a < b) {\n        rst <<= c;\n        a += 1;\n    }\n    return rst;\n}\n"},{id:8,name:"Global Variables",code:"int main() {\n    a = 3;\n    return a;\n}\n\nint a  = 0;\n\nint foo() {\n    return 0;\n}\n"}];function z(){var e=Object(u.useState)([0,0]),t=Object(f.a)(e,2),n=t[0],a=t[1];return Object(u.useLayoutEffect)((function(){function e(){a([window.innerWidth,window.innerHeight])}var t=function(e,t){var n,a=arguments,r=this;return function(i){clearTimeout(n),n=setTimeout((function(t){n=null,e.apply(r,a)}),t)}}(e,1e3);return window.addEventListener("resize",t),function(){return window.removeEventListener("resize",e)}}),[]),n}var V=[{id:1,name:"Parse Tree"},{id:2,name:"AST"}];var H=function(){var e=Object(u.useState)({id:"0",label:"GNC"}),t=Object(f.a)(e,2),n=t[0],a=t[1],r=Object(u.useState)({id:"0",label:"GNC"}),i=Object(f.a)(r,2),s=i[0],c=i[1],l=Object(u.useState)(V[0]),o=Object(f.a)(l,2),d=o[0],b=o[1],m=Object(u.useState)(D[0]),j=Object(f.a)(m,2),h=j[0],x=j[1],C=Object(u.useState)(h.code),k=Object(f.a)(C,2),T=k[0],B=k[1],E=Object(u.useState)(!1),L=Object(f.a)(E,2),A=L[0],I=L[1],H=Object(u.useState)(!1),J=Object(f.a)(H,2),_=J[0],Z=J[1],U=Object(u.useState)(""),K=Object(f.a)(U,2),X=K[0],Y=K[1],q=Object(u.useState)(""),Q=Object(f.a)(q,2),$=Q[0],ee=Q[1],te=z(),ne=Object(u.useState)([0,0]),ae=Object(f.a)(ne,2),re=ae[0],ie=ae[1],se=function(){var e=JSON.parse(Object(M.a)(T));e.error?(I(!1),Y("Compilation Error"),ee(e.error_message),Z(!0)):(a(e.parse_tree),c(function(e){var t=0;return{id:t.toString(),label:"GNC",attrs:{remark:"AST Root Node"},children:function e(n){var a,r=[],i=Object(P.a)(n);try{for(i.s();!(a=i.n()).done;){var s=a.value,c={id:(t+=1).toString(),label:"",attrs:{},children:[]};if("BreakStatement"===s||"ContinueStatement"===s)c.label=s;else for(var l in s)switch(c.label=l,l){case"Assignment":var o=Object(f.a)(s[l],3),d=o[0],u=o[1],b=o[2];c.attrs={assignOperation:d,leftValue:u},c.children=e([b]);break;case"Identifier":c.attrs={name:s[l]};break;case"IntLiteral":case"BoolLiteral":case"FloatLiteral":c.attrs={value:s[l]};break;case"Declaration":var m=Object(f.a)(s[l],2),j=m[0],h=m[1];c.attrs={type:j,name:h};break;case"GlobalDeclaration":var x=Object(f.a)(s[l],3),g=x[0],O=x[1],p=x[2];c.attrs={type:g,name:O},c.children=e([p]);break;case"BinaryExpression":var v=Object(f.a)(s[l],3),w=v[0],y=v[1],N=v[2];c.attrs={binaryOperator:w},c.children=e([y,N]);break;case"UnaryExpression":var C=Object(f.a)(s[l],2),k=C[0],S=C[1];c.attrs={unaryOperator:k},c.children=e([S]);break;case"Function":var F=Object(f.a)(s[l],4),T=F[0],G=F[1],B=F[2],E=F[3];t+=1,c.attrs={functionName:G,returnType:T,parameters:JSON.stringify(B,null,2)},c.children=e(E);break;case"ReturnStatement":c.children=e([s[l]]);break;case"FunctionCall":var L=Object(f.a)(s[l],2),W=L[0],A=L[1];c.attrs={functionName:W},c.children=e([{Arguments:A}]);break;case"ForStatement":var I=Object(f.a)(s[l],4),R=I[0],M=I[1],D=I[2],z=I[3];c.children=e([{InitClause:R},M,D,z]);break;case"WhileStatement":var V=Object(f.a)(s[l],3),H=V[0],J=V[1],_=V[2];c.attrs={isDoWhile:H},c.children=e([J,_]);break;case"IfStatement":case"InitClause":case"Arguments":case"BlockStatement":c.children=e(s[l]);break;case"BreakStatement":case"ContinueStatement":break;default:console.log(l),console.log(s[l])}r.push(c)}}catch(Z){i.e(Z)}finally{i.f()}return r}(e)}}(e.ast)))};return Object(u.useEffect)((function(){se()}),[]),Object(u.useEffect)((function(){var e=Object(f.a)(re,2),t=e[0],n=e[1],a=Object(f.a)(te,2),r=a[0],i=a[1];(r<t||i<n)&&(_||(I(!0),Y("Detected Window Shrink!"),ee("We detected a window shrink on your browser, please refresh to get better experience."),Z(!0))),ie(te)}),[te]),Object(g.jsxs)("div",{className:"bg-green-100",children:[Object(g.jsx)(R,{isWarning:A,visible:_,title:X,content:$,onClose:Z}),Object(g.jsx)(p,{children:Object(g.jsxs)("div",{className:"text-4xl sm:text-6xl md:text-7xl lg:text-8xl text-center object-center align-middle font-extrabold w-full h-full",children:[Object(g.jsx)(y,{children:"GNC Compiler Online"}),Object(g.jsxs)("div",{className:"flex",children:[Object(g.jsx)("div",{className:"flex flex-auto"}),Object(g.jsx)("a",{className:"flex",href:"https://github.com/PAN-Ziyue/GNC",children:Object(g.jsx)("img",{className:"flex mx-auto p-1",src:"https://img.shields.io/github/stars/PAN-Ziyue/GNC",alt:"GitHub Repo"})}),Object(g.jsx)("div",{className:"flex flex-auto"})]})]})}),Object(g.jsxs)("div",{className:"flex flex-auto flex-col lg:flex-row",children:[Object(g.jsx)(S,{left:Object(g.jsx)(w,{children:"Code"}),right:Object(g.jsx)(W,{widthClass:"w-44",options:D,defaultOption:h,onChange:function(e){x(e),B(e.code)}}),content:Object(g.jsx)(F.a,{defaultLanguage:"c",theme:"light",width:"100%",onChange:B,value:T})}),Object(g.jsx)(S,{left:Object(g.jsx)("div",{children:Object(g.jsx)(w,{children:"Visualization"})}),right:Object(g.jsxs)("div",{className:"flex flex-row",children:[Object(g.jsx)(W,{widthClass:"w-40",options:V,defaultOption:d,onChange:b}),Object(g.jsx)(O,{onClick:se,children:"Compile"})]}),content:Object(g.jsx)(G,{data:1===d.id?n:s})}),Object(g.jsx)(S,{left:Object(g.jsx)(w,{children:"Running Result"}),right:Object(g.jsx)(O,{children:"Run"}),content:Object(g.jsxs)("div",{children:["function: `main()`",Object(g.jsx)("br",{}),"a: ",Object(g.jsx)(N,{}),Object(g.jsx)("br",{}),"res: 23333"]})})]}),Object(g.jsx)(v,{children:Object(g.jsxs)("p",{className:"text-xs lg:text-lg text-green-700 text-opacity-50 text-center object-center w-full",children:[Object(g.jsx)("a",{href:"https://github.com/PAN-Ziyue/GNC",className:"no-underline hover:underline",children:"GNC"})," (2021) is the course project of Compilation Principle by Ziyue, MartinNose and ",Object(g.jsx)("a",{href:"https://www.ncj.wiki",className:"no-underline hover:underline",children:"NCJ"}),'. GNC is a recursive acronym for "GNC\'s Not C-language!"']})})]})},J=function(e){e&&e instanceof Function&&n.e(4).then(n.bind(null,563)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),i(e),s(e)}))};j.a.render(Object(g.jsx)(b.a.StrictMode,{children:Object(g.jsx)(H,{})}),document.getElementById("root")),J()},282:function(e,t,n){},283:function(e,t,n){}}]);
//# sourceMappingURL=3.5233ef83.chunk.js.map