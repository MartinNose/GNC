const data = {"error":false,"error_message":"","parse_tree":{"id":"gnc(0,207)","label":"gnc","children":[{"id":"function(38,84)","label":"function","children":[{"id":"data_type(38,41)","label":"data_type","children":[{"id":"int(38,41)","label":"int","children":[]}]},{"id":"identifier(42,45)","label":"identifier","children":[]},{"id":"function_parameter_list(45,47)","label":"function_parameter_list","children":[]},{"id":"statement(54,68)","label":"statement","children":[{"id":"declaration_statement(54,67)","label":"declaration_statement","children":[{"id":"data_type(54,57)","label":"data_type","children":[{"id":"int(54,57)","label":"int","children":[]}]},{"id":"identifier(58,59)","label":"identifier","children":[]},{"id":"expression(62,67)","label":"expression","children":[{"id":"logical_or_expression(62,67)","label":"logical_or_expression","children":[{"id":"logical_and_expression(62,67)","label":"logical_and_expression","children":[{"id":"inclusive_or_expression(62,67)","label":"inclusive_or_expression","children":[{"id":"exclusive_or_expression(62,67)","label":"exclusive_or_expression","children":[{"id":"bitwise_and_expression(62,67)","label":"bitwise_and_expression","children":[{"id":"equality_expression(62,67)","label":"equality_expression","children":[{"id":"comparison_expression(62,67)","label":"comparison_expression","children":[{"id":"shift_expression(62,67)","label":"shift_expression","children":[{"id":"additive_expression(62,67)","label":"additive_expression","children":[{"id":"multiplicative_expression(62,67)","label":"multiplicative_expression","children":[{"id":"unary_expression(62,63)","label":"unary_expression","children":[{"id":"int_literal(62,63)","label":"int_literal","children":[{"id":"dec_literal(62,63)","label":"dec_literal","children":[]}]}]},{"id":"op_add(64,65)","label":"op_add","children":[]},{"id":"unary_expression(66,67)","label":"unary_expression","children":[{"id":"int_literal(66,67)","label":"int_literal","children":[{"id":"dec_literal(66,67)","label":"dec_literal","children":[]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]},{"id":"statement(73,82)","label":"statement","children":[{"id":"return_statement(73,81)","label":"return_statement","children":[{"id":"expression(80,81)","label":"expression","children":[{"id":"logical_or_expression(80,81)","label":"logical_or_expression","children":[{"id":"logical_and_expression(80,81)","label":"logical_and_expression","children":[{"id":"inclusive_or_expression(80,81)","label":"inclusive_or_expression","children":[{"id":"exclusive_or_expression(80,81)","label":"exclusive_or_expression","children":[{"id":"bitwise_and_expression(80,81)","label":"bitwise_and_expression","children":[{"id":"equality_expression(80,81)","label":"equality_expression","children":[{"id":"comparison_expression(80,81)","label":"comparison_expression","children":[{"id":"shift_expression(80,81)","label":"shift_expression","children":[{"id":"additive_expression(80,81)","label":"additive_expression","children":[{"id":"multiplicative_expression(80,81)","label":"multiplicative_expression","children":[{"id":"unary_expression(80,81)","label":"unary_expression","children":[{"id":"identifier(80,81)","label":"identifier","children":[]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]},{"id":"function(86,144)","label":"function","children":[{"id":"data_type(86,89)","label":"data_type","children":[{"id":"int(86,89)","label":"int","children":[]}]},{"id":"identifier(90,93)","label":"identifier","children":[]},{"id":"function_parameter_list(93,95)","label":"function_parameter_list","children":[]},{"id":"statement(102,124)","label":"statement","children":[{"id":"declaration_statement(102,123)","label":"declaration_statement","children":[{"id":"data_type(102,105)","label":"data_type","children":[{"id":"int(102,105)","label":"int","children":[]}]},{"id":"identifier(106,107)","label":"identifier","children":[]},{"id":"expression(110,123)","label":"expression","children":[{"id":"logical_or_expression(110,123)","label":"logical_or_expression","children":[{"id":"logical_and_expression(110,123)","label":"logical_and_expression","children":[{"id":"inclusive_or_expression(110,123)","label":"inclusive_or_expression","children":[{"id":"exclusive_or_expression(110,123)","label":"exclusive_or_expression","children":[{"id":"bitwise_and_expression(110,123)","label":"bitwise_and_expression","children":[{"id":"equality_expression(110,123)","label":"equality_expression","children":[{"id":"comparison_expression(110,123)","label":"comparison_expression","children":[{"id":"shift_expression(110,123)","label":"shift_expression","children":[{"id":"additive_expression(110,123)","label":"additive_expression","children":[{"id":"multiplicative_expression(110,119)","label":"multiplicative_expression","children":[{"id":"unary_expression(110,111)","label":"unary_expression","children":[{"id":"int_literal(110,111)","label":"int_literal","children":[{"id":"dec_literal(110,111)","label":"dec_literal","children":[]}]}]},{"id":"op_add(112,113)","label":"op_add","children":[]},{"id":"unary_expression(114,115)","label":"unary_expression","children":[{"id":"int_literal(114,115)","label":"int_literal","children":[{"id":"dec_literal(114,115)","label":"dec_literal","children":[]}]}]},{"id":"op_mul(116,117)","label":"op_mul","children":[]},{"id":"unary_expression(118,119)","label":"unary_expression","children":[{"id":"int_literal(118,119)","label":"int_literal","children":[{"id":"dec_literal(118,119)","label":"dec_literal","children":[]}]}]}]},{"id":"op_sub(120,121)","label":"op_sub","children":[]},{"id":"multiplicative_expression(122,123)","label":"multiplicative_expression","children":[{"id":"unary_expression(122,123)","label":"unary_expression","children":[{"id":"int_literal(122,123)","label":"int_literal","children":[{"id":"dec_literal(122,123)","label":"dec_literal","children":[]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]},{"id":"statement(129,142)","label":"statement","children":[{"id":"return_statement(129,141)","label":"return_statement","children":[{"id":"expression(136,141)","label":"expression","children":[{"id":"logical_or_expression(136,141)","label":"logical_or_expression","children":[{"id":"logical_and_expression(136,141)","label":"logical_and_expression","children":[{"id":"inclusive_or_expression(136,141)","label":"inclusive_or_expression","children":[{"id":"exclusive_or_expression(136,141)","label":"exclusive_or_expression","children":[{"id":"bitwise_and_expression(136,141)","label":"bitwise_and_expression","children":[{"id":"equality_expression(136,141)","label":"equality_expression","children":[{"id":"comparison_expression(136,141)","label":"comparison_expression","children":[{"id":"shift_expression(136,141)","label":"shift_expression","children":[{"id":"additive_expression(136,141)","label":"additive_expression","children":[{"id":"multiplicative_expression(136,141)","label":"multiplicative_expression","children":[{"id":"unary_expression(136,137)","label":"unary_expression","children":[{"id":"identifier(136,137)","label":"identifier","children":[]}]},{"id":"op_add(138,139)","label":"op_add","children":[]},{"id":"unary_expression(140,141)","label":"unary_expression","children":[{"id":"int_literal(140,141)","label":"int_literal","children":[{"id":"dec_literal(140,141)","label":"dec_literal","children":[]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]},{"id":"function(146,207)","label":"function","children":[{"id":"data_type(146,149)","label":"data_type","children":[{"id":"int(146,149)","label":"int","children":[]}]},{"id":"identifier(150,153)","label":"identifier","children":[]},{"id":"function_parameter_list(153,155)","label":"function_parameter_list","children":[]},{"id":"statement(162,172)","label":"statement","children":[{"id":"declaration_statement(162,171)","label":"declaration_statement","children":[{"id":"data_type(162,165)","label":"data_type","children":[{"id":"int(162,165)","label":"int","children":[]}]},{"id":"identifier(166,167)","label":"identifier","children":[]},{"id":"expression(170,171)","label":"expression","children":[{"id":"logical_or_expression(170,171)","label":"logical_or_expression","children":[{"id":"logical_and_expression(170,171)","label":"logical_and_expression","children":[{"id":"inclusive_or_expression(170,171)","label":"inclusive_or_expression","children":[{"id":"exclusive_or_expression(170,171)","label":"exclusive_or_expression","children":[{"id":"bitwise_and_expression(170,171)","label":"bitwise_and_expression","children":[{"id":"equality_expression(170,171)","label":"equality_expression","children":[{"id":"comparison_expression(170,171)","label":"comparison_expression","children":[{"id":"shift_expression(170,171)","label":"shift_expression","children":[{"id":"additive_expression(170,171)","label":"additive_expression","children":[{"id":"multiplicative_expression(170,171)","label":"multiplicative_expression","children":[{"id":"unary_expression(170,171)","label":"unary_expression","children":[{"id":"int_literal(170,171)","label":"int_literal","children":[{"id":"dec_literal(170,171)","label":"dec_literal","children":[]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]},{"id":"statement(177,191)","label":"statement","children":[{"id":"declaration_statement(177,190)","label":"declaration_statement","children":[{"id":"data_type(177,180)","label":"data_type","children":[{"id":"int(177,180)","label":"int","children":[]}]},{"id":"identifier(181,182)","label":"identifier","children":[]},{"id":"expression(185,190)","label":"expression","children":[{"id":"logical_or_expression(185,190)","label":"logical_or_expression","children":[{"id":"logical_and_expression(185,190)","label":"logical_and_expression","children":[{"id":"inclusive_or_expression(185,190)","label":"inclusive_or_expression","children":[{"id":"exclusive_or_expression(185,190)","label":"exclusive_or_expression","children":[{"id":"bitwise_and_expression(185,190)","label":"bitwise_and_expression","children":[{"id":"equality_expression(185,190)","label":"equality_expression","children":[{"id":"comparison_expression(185,190)","label":"comparison_expression","children":[{"id":"shift_expression(185,190)","label":"shift_expression","children":[{"id":"additive_expression(185,190)","label":"additive_expression","children":[{"id":"multiplicative_expression(185,190)","label":"multiplicative_expression","children":[{"id":"unary_expression(185,186)","label":"unary_expression","children":[{"id":"int_literal(185,186)","label":"int_literal","children":[{"id":"dec_literal(185,186)","label":"dec_literal","children":[]}]}]},{"id":"op_div(187,188)","label":"op_div","children":[]},{"id":"unary_expression(189,190)","label":"unary_expression","children":[{"id":"identifier(189,190)","label":"identifier","children":[]}]}]}]}]}]}]}]}]}]}]}]}]}]}]},{"id":"statement(196,205)","label":"statement","children":[{"id":"return_statement(196,204)","label":"return_statement","children":[{"id":"expression(203,204)","label":"expression","children":[{"id":"logical_or_expression(203,204)","label":"logical_or_expression","children":[{"id":"logical_and_expression(203,204)","label":"logical_and_expression","children":[{"id":"inclusive_or_expression(203,204)","label":"inclusive_or_expression","children":[{"id":"exclusive_or_expression(203,204)","label":"exclusive_or_expression","children":[{"id":"bitwise_and_expression(203,204)","label":"bitwise_and_expression","children":[{"id":"equality_expression(203,204)","label":"equality_expression","children":[{"id":"comparison_expression(203,204)","label":"comparison_expression","children":[{"id":"shift_expression(203,204)","label":"shift_expression","children":[{"id":"additive_expression(203,204)","label":"additive_expression","children":[{"id":"multiplicative_expression(203,204)","label":"multiplicative_expression","children":[{"id":"unary_expression(203,204)","label":"unary_expression","children":[{"id":"identifier(203,204)","label":"identifier","children":[]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]},{"id":"EOI(207,207)","label":"EOI","children":[]}]},"ast":[{"Function":["Int","add",[],[{"Declaration":["Int","a"]},{"Assignment":["Simple","a",{"BinaryExpression":["Add",{"IntLiteral":2},{"IntLiteral":2}]}]},{"ReturnStatement":{"Identifier":"a"}}]]},{"Function":["Int","mul",[],[{"Declaration":["Int","a"]},{"Assignment":["Simple","a",{"BinaryExpression":["Subtract",{"BinaryExpression":["Multiply",{"BinaryExpression":["Add",{"IntLiteral":1},{"IntLiteral":3}]},{"IntLiteral":4}]},{"IntLiteral":2}]}]},{"ReturnStatement":{"BinaryExpression":["Add",{"Identifier":"a"},{"IntLiteral":1}]}}]]},{"Function":["Int","div",[],[{"Declaration":["Int","b"]},{"Assignment":["Simple","b",{"IntLiteral":2}]},{"Declaration":["Int","a"]},{"Assignment":["Simple","a",{"BinaryExpression":["Divide",{"IntLiteral":3},{"Identifier":"b"}]}]},{"ReturnStatement":{"Identifier":"b"}}]]}]}
const ast = data['ast']

const node2tree = (astNode) => {
    let nodeList = []
    for (const node of astNode) {
        for (const x in node) {
            id += 1
            let treeNode = {
                id: id.toString(),
                label: x,
                attrs: {},
                children: []
            }
            switch (x) {
                case "Function":
                    const [retType, funcName, parameters, children] = node[x]
                    id += 1
                    treeNode.attrs = {
                        functionName: funcName,
                        returnType: retType,
                        parameters
                    }
                    treeNode.children = node2tree(children)
                    break
                case "ReturnStatement":
                    treeNode.children = node2tree([node[x]])
                    break
                case "IntLiteral":
                    treeNode.attrs = {
                        value: node[x]
                    }
                    break
                default:
                    console.log(x)
            }
            nodeList.push(treeNode)
        }
    }
    return nodeList
}

let id = 0
let tree = {
    id: id.toString(),
    label: "GNC",
    attrs: {
        remark: "root node"
    },
    children: node2tree(ast)
}

console.log(JSON.stringify(tree, null, 2))