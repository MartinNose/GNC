const data = {"error":false,"error_message":"","parse_tree":{"id":"gnc(0,216)","label":"gnc","children":[{"id":"function(2,45)","label":"function","children":[{"id":"data_type(2,5)","label":"data_type","children":[{"id":"int(2,5)","label":"int","children":[]}]},{"id":"identifier(6,9)","label":"identifier","children":[]},{"id":"function_parameter_list(9,23)","label":"function_parameter_list","children":[{"id":"function_parameter(10,15)","label":"function_parameter","children":[{"id":"data_type(10,13)","label":"data_type","children":[{"id":"int(10,13)","label":"int","children":[]}]},{"id":"identifier(14,15)","label":"identifier","children":[]}]},{"id":"function_parameter(17,22)","label":"function_parameter","children":[{"id":"data_type(17,20)","label":"data_type","children":[{"id":"int(17,20)","label":"int","children":[]}]},{"id":"identifier(21,22)","label":"identifier","children":[]}]}]},{"id":"statement(30,43)","label":"statement","children":[{"id":"return_statement(30,42)","label":"return_statement","children":[{"id":"expression(37,42)","label":"expression","children":[{"id":"logical_or_expression(37,42)","label":"logical_or_expression","children":[{"id":"logical_and_expression(37,42)","label":"logical_and_expression","children":[{"id":"inclusive_or_expression(37,42)","label":"inclusive_or_expression","children":[{"id":"exclusive_or_expression(37,42)","label":"exclusive_or_expression","children":[{"id":"bitwise_and_expression(37,42)","label":"bitwise_and_expression","children":[{"id":"equality_expression(37,42)","label":"equality_expression","children":[{"id":"comparison_expression(37,42)","label":"comparison_expression","children":[{"id":"shift_expression(37,42)","label":"shift_expression","children":[{"id":"additive_expression(37,42)","label":"additive_expression","children":[{"id":"multiplicative_expression(37,42)","label":"multiplicative_expression","children":[{"id":"unary_expression(37,38)","label":"unary_expression","children":[{"id":"identifier(37,38)","label":"identifier","children":[]}]},{"id":"op_add(39,40)","label":"op_add","children":[]},{"id":"unary_expression(41,42)","label":"unary_expression","children":[{"id":"identifier(41,42)","label":"identifier","children":[]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]},{"id":"function(48,84)","label":"function","children":[{"id":"data_type(48,51)","label":"data_type","children":[{"id":"int(48,51)","label":"int","children":[]}]},{"id":"identifier(52,56)","label":"identifier","children":[]},{"id":"function_parameter_list(56,58)","label":"function_parameter_list","children":[]},{"id":"statement(65,82)","label":"statement","children":[{"id":"return_statement(65,81)","label":"return_statement","children":[{"id":"expression(72,81)","label":"expression","children":[{"id":"logical_or_expression(72,81)","label":"logical_or_expression","children":[{"id":"logical_and_expression(72,81)","label":"logical_and_expression","children":[{"id":"inclusive_or_expression(72,81)","label":"inclusive_or_expression","children":[{"id":"exclusive_or_expression(72,81)","label":"exclusive_or_expression","children":[{"id":"bitwise_and_expression(72,81)","label":"bitwise_and_expression","children":[{"id":"equality_expression(72,81)","label":"equality_expression","children":[{"id":"comparison_expression(72,81)","label":"comparison_expression","children":[{"id":"shift_expression(72,81)","label":"shift_expression","children":[{"id":"additive_expression(72,81)","label":"additive_expression","children":[{"id":"multiplicative_expression(72,81)","label":"multiplicative_expression","children":[{"id":"unary_expression(72,81)","label":"unary_expression","children":[{"id":"function_call(72,81)","label":"function_call","children":[{"id":"identifier(72,75)","label":"identifier","children":[]},{"id":"expression(76,77)","label":"expression","children":[{"id":"logical_or_expression(76,77)","label":"logical_or_expression","children":[{"id":"logical_and_expression(76,77)","label":"logical_and_expression","children":[{"id":"inclusive_or_expression(76,77)","label":"inclusive_or_expression","children":[{"id":"exclusive_or_expression(76,77)","label":"exclusive_or_expression","children":[{"id":"bitwise_and_expression(76,77)","label":"bitwise_and_expression","children":[{"id":"equality_expression(76,77)","label":"equality_expression","children":[{"id":"comparison_expression(76,77)","label":"comparison_expression","children":[{"id":"shift_expression(76,77)","label":"shift_expression","children":[{"id":"additive_expression(76,77)","label":"additive_expression","children":[{"id":"multiplicative_expression(76,77)","label":"multiplicative_expression","children":[{"id":"unary_expression(76,77)","label":"unary_expression","children":[{"id":"int_literal(76,77)","label":"int_literal","children":[{"id":"dec_literal(76,77)","label":"dec_literal","children":[]}]}]}]}]}]}]}]}]}]}]}]}]}]},{"id":"expression(79,80)","label":"expression","children":[{"id":"logical_or_expression(79,80)","label":"logical_or_expression","children":[{"id":"logical_and_expression(79,80)","label":"logical_and_expression","children":[{"id":"inclusive_or_expression(79,80)","label":"inclusive_or_expression","children":[{"id":"exclusive_or_expression(79,80)","label":"exclusive_or_expression","children":[{"id":"bitwise_and_expression(79,80)","label":"bitwise_and_expression","children":[{"id":"equality_expression(79,80)","label":"equality_expression","children":[{"id":"comparison_expression(79,80)","label":"comparison_expression","children":[{"id":"shift_expression(79,80)","label":"shift_expression","children":[{"id":"additive_expression(79,80)","label":"additive_expression","children":[{"id":"multiplicative_expression(79,80)","label":"multiplicative_expression","children":[{"id":"unary_expression(79,80)","label":"unary_expression","children":[{"id":"int_literal(79,80)","label":"int_literal","children":[{"id":"dec_literal(79,80)","label":"dec_literal","children":[]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]},{"id":"function(88,214)","label":"function","children":[{"id":"data_type(88,91)","label":"data_type","children":[{"id":"int(88,91)","label":"int","children":[]}]},{"id":"identifier(92,95)","label":"identifier","children":[]},{"id":"function_parameter_list(95,116)","label":"function_parameter_list","children":[{"id":"function_parameter(96,101)","label":"function_parameter","children":[{"id":"data_type(96,99)","label":"data_type","children":[{"id":"int(96,99)","label":"int","children":[]}]},{"id":"identifier(100,101)","label":"identifier","children":[]}]},{"id":"function_parameter(103,108)","label":"function_parameter","children":[{"id":"data_type(103,106)","label":"data_type","children":[{"id":"int(103,106)","label":"int","children":[]}]},{"id":"identifier(107,108)","label":"identifier","children":[]}]},{"id":"function_parameter(110,115)","label":"function_parameter","children":[{"id":"data_type(110,113)","label":"data_type","children":[{"id":"int(110,113)","label":"int","children":[]}]},{"id":"identifier(114,115)","label":"identifier","children":[]}]}]},{"id":"statement(123,135)","label":"statement","children":[{"id":"declaration_statement(123,134)","label":"declaration_statement","children":[{"id":"data_type(123,126)","label":"data_type","children":[{"id":"int(123,126)","label":"int","children":[]}]},{"id":"identifier(127,130)","label":"identifier","children":[]},{"id":"expression(133,134)","label":"expression","children":[{"id":"logical_or_expression(133,134)","label":"logical_or_expression","children":[{"id":"logical_and_expression(133,134)","label":"logical_and_expression","children":[{"id":"inclusive_or_expression(133,134)","label":"inclusive_or_expression","children":[{"id":"exclusive_or_expression(133,134)","label":"exclusive_or_expression","children":[{"id":"bitwise_and_expression(133,134)","label":"bitwise_and_expression","children":[{"id":"equality_expression(133,134)","label":"equality_expression","children":[{"id":"comparison_expression(133,134)","label":"comparison_expression","children":[{"id":"shift_expression(133,134)","label":"shift_expression","children":[{"id":"additive_expression(133,134)","label":"additive_expression","children":[{"id":"multiplicative_expression(133,134)","label":"multiplicative_expression","children":[{"id":"unary_expression(133,134)","label":"unary_expression","children":[{"id":"int_literal(133,134)","label":"int_literal","children":[{"id":"dec_literal(133,134)","label":"dec_literal","children":[]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]},{"id":"statement(140,196)","label":"statement","children":[{"id":"while_statement(140,196)","label":"while_statement","children":[{"id":"expression(147,152)","label":"expression","children":[{"id":"logical_or_expression(147,152)","label":"logical_or_expression","children":[{"id":"logical_and_expression(147,152)","label":"logical_and_expression","children":[{"id":"inclusive_or_expression(147,152)","label":"inclusive_or_expression","children":[{"id":"exclusive_or_expression(147,152)","label":"exclusive_or_expression","children":[{"id":"bitwise_and_expression(147,152)","label":"bitwise_and_expression","children":[{"id":"equality_expression(147,152)","label":"equality_expression","children":[{"id":"comparison_expression(147,152)","label":"comparison_expression","children":[{"id":"shift_expression(147,149)","label":"shift_expression","children":[{"id":"additive_expression(147,149)","label":"additive_expression","children":[{"id":"multiplicative_expression(147,149)","label":"multiplicative_expression","children":[{"id":"unary_expression(147,148)","label":"unary_expression","children":[{"id":"identifier(147,148)","label":"identifier","children":[]}]}]}]}]},{"id":"op_lt(149,150)","label":"op_lt","children":[]},{"id":"shift_expression(151,152)","label":"shift_expression","children":[{"id":"additive_expression(151,152)","label":"additive_expression","children":[{"id":"multiplicative_expression(151,152)","label":"multiplicative_expression","children":[{"id":"unary_expression(151,152)","label":"unary_expression","children":[{"id":"identifier(151,152)","label":"identifier","children":[]}]}]}]}]}]}]}]}]}]}]}]}]},{"id":"statement(154,196)","label":"statement","children":[{"id":"block_statement(154,196)","label":"block_statement","children":[{"id":"statement(164,174)","label":"statement","children":[{"id":"expression(164,173)","label":"expression","children":[{"id":"assignment_expression(164,173)","label":"assignment_expression","children":[{"id":"identifier(164,167)","label":"identifier","children":[]},{"id":"assign_shift_left(168,171)","label":"assign_shift_left","children":[]},{"id":"expression(172,173)","label":"expression","children":[{"id":"logical_or_expression(172,173)","label":"logical_or_expression","children":[{"id":"logical_and_expression(172,173)","label":"logical_and_expression","children":[{"id":"inclusive_or_expression(172,173)","label":"inclusive_or_expression","children":[{"id":"exclusive_or_expression(172,173)","label":"exclusive_or_expression","children":[{"id":"bitwise_and_expression(172,173)","label":"bitwise_and_expression","children":[{"id":"equality_expression(172,173)","label":"equality_expression","children":[{"id":"comparison_expression(172,173)","label":"comparison_expression","children":[{"id":"shift_expression(172,173)","label":"shift_expression","children":[{"id":"additive_expression(172,173)","label":"additive_expression","children":[{"id":"multiplicative_expression(172,173)","label":"multiplicative_expression","children":[{"id":"unary_expression(172,173)","label":"unary_expression","children":[{"id":"identifier(172,173)","label":"identifier","children":[]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]},{"id":"statement(183,190)","label":"statement","children":[{"id":"expression(183,189)","label":"expression","children":[{"id":"assignment_expression(183,189)","label":"assignment_expression","children":[{"id":"identifier(183,184)","label":"identifier","children":[]},{"id":"assign_add(185,187)","label":"assign_add","children":[]},{"id":"expression(188,189)","label":"expression","children":[{"id":"logical_or_expression(188,189)","label":"logical_or_expression","children":[{"id":"logical_and_expression(188,189)","label":"logical_and_expression","children":[{"id":"inclusive_or_expression(188,189)","label":"inclusive_or_expression","children":[{"id":"exclusive_or_expression(188,189)","label":"exclusive_or_expression","children":[{"id":"bitwise_and_expression(188,189)","label":"bitwise_and_expression","children":[{"id":"equality_expression(188,189)","label":"equality_expression","children":[{"id":"comparison_expression(188,189)","label":"comparison_expression","children":[{"id":"shift_expression(188,189)","label":"shift_expression","children":[{"id":"additive_expression(188,189)","label":"additive_expression","children":[{"id":"multiplicative_expression(188,189)","label":"multiplicative_expression","children":[{"id":"unary_expression(188,189)","label":"unary_expression","children":[{"id":"int_literal(188,189)","label":"int_literal","children":[{"id":"dec_literal(188,189)","label":"dec_literal","children":[]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]},{"id":"statement(201,212)","label":"statement","children":[{"id":"return_statement(201,211)","label":"return_statement","children":[{"id":"expression(208,211)","label":"expression","children":[{"id":"logical_or_expression(208,211)","label":"logical_or_expression","children":[{"id":"logical_and_expression(208,211)","label":"logical_and_expression","children":[{"id":"inclusive_or_expression(208,211)","label":"inclusive_or_expression","children":[{"id":"exclusive_or_expression(208,211)","label":"exclusive_or_expression","children":[{"id":"bitwise_and_expression(208,211)","label":"bitwise_and_expression","children":[{"id":"equality_expression(208,211)","label":"equality_expression","children":[{"id":"comparison_expression(208,211)","label":"comparison_expression","children":[{"id":"shift_expression(208,211)","label":"shift_expression","children":[{"id":"additive_expression(208,211)","label":"additive_expression","children":[{"id":"multiplicative_expression(208,211)","label":"multiplicative_expression","children":[{"id":"unary_expression(208,211)","label":"unary_expression","children":[{"id":"identifier(208,211)","label":"identifier","children":[]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]},{"id":"EOI(216,216)","label":"EOI","children":[]}]},"ast":[{"Function":["Int","foo",[{"param_type":"Int","param_name":"a"},{"param_type":"Int","param_name":"b"}],[{"ReturnStatement":{"BinaryExpression":["Add",{"Identifier":"a"},{"Identifier":"b"}]}}]]},{"Function":["Int","main",[],[{"ReturnStatement":{"FunctionCall":["foo",[{"IntLiteral":0},{"IntLiteral":1}]]}}]]},{"Function":["Int","bar",[{"param_type":"Int","param_name":"a"},{"param_type":"Int","param_name":"b"},{"param_type":"Int","param_name":"c"}],[{"Declaration":["Int","rst"]},{"Assignment":["Simple","rst",{"IntLiteral":0}]},{"WhileStatement":[false,{"BinaryExpression":["LessThan",{"Identifier":"a"},{"Identifier":"b"}]},{"BlockStatement":[{"Assignment":["ShiftLeft","rst",{"Identifier":"c"}]},{"Assignment":["Addition","a",{"IntLiteral":1}]}]}]},{"ReturnStatement":{"Identifier":"rst"}}]]}]}
const ast = data['ast']

const node2tree = (astNode) => {
    let nodeList = []
    for (const node of astNode) {
        for (const x in node) { // Actually there's only one entry inside
            id += 1
            let treeNode = {
                id: id.toString(),
                label: x,
                attrs: {},
                children: []
            }
            switch (x) {
                case "Function":
                    const [retType, funcName, parameters, funcChildren] = node[x]
                    id += 1
                    treeNode.attrs = {
                        functionName: funcName,
                        returnType: retType,
                        parameters
                    }
                    treeNode.children = node2tree(funcChildren)
                    break
                case "ReturnStatement":
                    treeNode.children = node2tree([node[x]])
                    break
                case "IntLiteral":
                    treeNode.attrs = {
                        value: node[x]
                    }
                    break
                case "Declaration":
                    const [type, name] = node[x]
                    treeNode.attrs = {
                        type,
                        name
                    }
                    break
                case "Assignment":
                    const [assignOperation, leftValue, assignChildren] = node[x]
                    treeNode.attrs = {
                        assignOperation,
                        leftValue
                    }
                    treeNode.children = node2tree([assignChildren])
                    break
                case "Identifier":
                    treeNode.attrs = {
                        name: node[x]
                    }
                    break
                case "BinaryExpression":
                    const [binaryOperator, lhs, rhs] = node[x]
                    treeNode.attrs = {
                        binaryOperator
                    }
                    treeNode.children = node2tree([lhs, rhs])
                    break
                case "ForStatement":
                    const [initClause, condition, iteration, forStatement] = node[x]
                    treeNode.children = node2tree([{InitClause: initClause}, condition, iteration, forStatement])
                    break
                case "InitClause": // InitClause is a special form of BlockStatement
                case "Arguments": // FuncCallArguments is a special form of BlockStatement
                case "BlockStatement":
                    treeNode.children = node2tree(node[x])
                    break
                case "FunctionCall":
                    const [funcCallName, funcArguments] = node[x]
                    treeNode.attrs = {
                        functionName: funcCallName
                    }
                    treeNode.children = node2tree([{Arguments: funcArguments}])
                    break
                case "WhileStatement":
                    const [isDoWhile, whileCondition, whileStatements] = node[x]
                    treeNode.attrs = {isDoWhile}
                    treeNode.children = node2tree([whileCondition, whileStatements])
                    break
                default:
                    console.log(x)
            }
            nodeList.push(treeNode)
        }
    }
    return nodeList
}

let id = 0
let tree = {
    id: id.toString(),
    label: "GNC",
    attrs: {
        remark: "AST Root Node"
    },
    children: node2tree(ast)
}

// console.log(JSON.stringify(tree, null, 2))
// console.log(JSON.stringify(tree))