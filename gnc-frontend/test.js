const data = {"error":false,"error_message":"","parse_tree":{"id":"gnc(0,259)","label":"gnc","children":[{"id":"function(0,259)","label":"function","children":[{"id":"data_type(0,3)","label":"data_type","children":[{"id":"int(0,3)","label":"int","children":[]}]},{"id":"identifier(4,8)","label":"identifier","children":[]},{"id":"function_parameter_list(8,10)","label":"function_parameter_list","children":[]},{"id":"statement(17,27)","label":"statement","children":[{"id":"declaration_statement(17,26)","label":"declaration_statement","children":[{"id":"data_type(17,20)","label":"data_type","children":[{"id":"int(17,20)","label":"int","children":[]}]},{"id":"identifier(21,22)","label":"identifier","children":[]},{"id":"expression(25,26)","label":"expression","children":[{"id":"logical_or_expression(25,26)","label":"logical_or_expression","children":[{"id":"logical_and_expression(25,26)","label":"logical_and_expression","children":[{"id":"inclusive_or_expression(25,26)","label":"inclusive_or_expression","children":[{"id":"exclusive_or_expression(25,26)","label":"exclusive_or_expression","children":[{"id":"bitwise_and_expression(25,26)","label":"bitwise_and_expression","children":[{"id":"equality_expression(25,26)","label":"equality_expression","children":[{"id":"comparison_expression(25,26)","label":"comparison_expression","children":[{"id":"shift_expression(25,26)","label":"shift_expression","children":[{"id":"additive_expression(25,26)","label":"additive_expression","children":[{"id":"multiplicative_expression(25,26)","label":"multiplicative_expression","children":[{"id":"unary_expression(25,26)","label":"unary_expression","children":[{"id":"int_literal(25,26)","label":"int_literal","children":[{"id":"dec_literal(25,26)","label":"dec_literal","children":[]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]},{"id":"statement(32,43)","label":"statement","children":[{"id":"declaration_statement(32,42)","label":"declaration_statement","children":[{"id":"data_type(32,35)","label":"data_type","children":[{"id":"int(32,35)","label":"int","children":[]}]},{"id":"identifier(36,37)","label":"identifier","children":[]},{"id":"expression(40,42)","label":"expression","children":[{"id":"logical_or_expression(40,42)","label":"logical_or_expression","children":[{"id":"logical_and_expression(40,42)","label":"logical_and_expression","children":[{"id":"inclusive_or_expression(40,42)","label":"inclusive_or_expression","children":[{"id":"exclusive_or_expression(40,42)","label":"exclusive_or_expression","children":[{"id":"bitwise_and_expression(40,42)","label":"bitwise_and_expression","children":[{"id":"equality_expression(40,42)","label":"equality_expression","children":[{"id":"comparison_expression(40,42)","label":"comparison_expression","children":[{"id":"shift_expression(40,42)","label":"shift_expression","children":[{"id":"additive_expression(40,42)","label":"additive_expression","children":[{"id":"multiplicative_expression(40,42)","label":"multiplicative_expression","children":[{"id":"unary_expression(40,42)","label":"unary_expression","children":[{"id":"int_literal(40,42)","label":"int_literal","children":[{"id":"dec_literal(40,42)","label":"dec_literal","children":[]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]},{"id":"statement(48,59)","label":"statement","children":[{"id":"declaration_statement(48,58)","label":"declaration_statement","children":[{"id":"data_type(48,51)","label":"data_type","children":[{"id":"int(48,51)","label":"int","children":[]}]},{"id":"identifier(52,53)","label":"identifier","children":[]},{"id":"expression(56,58)","label":"expression","children":[{"id":"logical_or_expression(56,58)","label":"logical_or_expression","children":[{"id":"logical_and_expression(56,58)","label":"logical_and_expression","children":[{"id":"inclusive_or_expression(56,58)","label":"inclusive_or_expression","children":[{"id":"exclusive_or_expression(56,58)","label":"exclusive_or_expression","children":[{"id":"bitwise_and_expression(56,58)","label":"bitwise_and_expression","children":[{"id":"equality_expression(56,58)","label":"equality_expression","children":[{"id":"comparison_expression(56,58)","label":"comparison_expression","children":[{"id":"shift_expression(56,58)","label":"shift_expression","children":[{"id":"additive_expression(56,58)","label":"additive_expression","children":[{"id":"multiplicative_expression(56,58)","label":"multiplicative_expression","children":[{"id":"unary_expression(56,58)","label":"unary_expression","children":[{"id":"int_literal(56,58)","label":"int_literal","children":[{"id":"dec_literal(56,58)","label":"dec_literal","children":[]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]},{"id":"statement(65,110)","label":"statement","children":[{"id":"do_while_statement(65,109)","label":"do_while_statement","children":[{"id":"statement(68,94)","label":"statement","children":[{"id":"block_statement(68,94)","label":"block_statement","children":[{"id":"statement(78,88)","label":"statement","children":[{"id":"expression(78,87)","label":"expression","children":[{"id":"assignment_expression(78,87)","label":"assignment_expression","children":[{"id":"identifier(78,79)","label":"identifier","children":[]},{"id":"assign_simple(80,81)","label":"assign_simple","children":[]},{"id":"expression(82,87)","label":"expression","children":[{"id":"logical_or_expression(82,87)","label":"logical_or_expression","children":[{"id":"logical_and_expression(82,87)","label":"logical_and_expression","children":[{"id":"inclusive_or_expression(82,87)","label":"inclusive_or_expression","children":[{"id":"exclusive_or_expression(82,87)","label":"exclusive_or_expression","children":[{"id":"bitwise_and_expression(82,87)","label":"bitwise_and_expression","children":[{"id":"equality_expression(82,87)","label":"equality_expression","children":[{"id":"comparison_expression(82,87)","label":"comparison_expression","children":[{"id":"shift_expression(82,87)","label":"shift_expression","children":[{"id":"additive_expression(82,87)","label":"additive_expression","children":[{"id":"multiplicative_expression(82,84)","label":"multiplicative_expression","children":[{"id":"unary_expression(82,83)","label":"unary_expression","children":[{"id":"identifier(82,83)","label":"identifier","children":[]}]}]},{"id":"op_sub(84,85)","label":"op_sub","children":[]},{"id":"multiplicative_expression(86,87)","label":"multiplicative_expression","children":[{"id":"unary_expression(86,87)","label":"unary_expression","children":[{"id":"identifier(86,87)","label":"identifier","children":[]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]},{"id":"expression(102,108)","label":"expression","children":[{"id":"logical_or_expression(102,108)","label":"logical_or_expression","children":[{"id":"logical_and_expression(102,108)","label":"logical_and_expression","children":[{"id":"inclusive_or_expression(102,108)","label":"inclusive_or_expression","children":[{"id":"exclusive_or_expression(102,108)","label":"exclusive_or_expression","children":[{"id":"bitwise_and_expression(102,108)","label":"bitwise_and_expression","children":[{"id":"equality_expression(102,108)","label":"equality_expression","children":[{"id":"comparison_expression(102,108)","label":"comparison_expression","children":[{"id":"shift_expression(102,104)","label":"shift_expression","children":[{"id":"additive_expression(102,104)","label":"additive_expression","children":[{"id":"multiplicative_expression(102,104)","label":"multiplicative_expression","children":[{"id":"unary_expression(102,103)","label":"unary_expression","children":[{"id":"identifier(102,103)","label":"identifier","children":[]}]}]}]}]},{"id":"op_ge(104,106)","label":"op_ge","children":[]},{"id":"shift_expression(107,108)","label":"shift_expression","children":[{"id":"additive_expression(107,108)","label":"additive_expression","children":[{"id":"multiplicative_expression(107,108)","label":"multiplicative_expression","children":[{"id":"unary_expression(107,108)","label":"unary_expression","children":[{"id":"int_literal(107,108)","label":"int_literal","children":[{"id":"dec_literal(107,108)","label":"dec_literal","children":[]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]},{"id":"statement(116,242)","label":"statement","children":[{"id":"while_statement(116,242)","label":"while_statement","children":[{"id":"expression(123,128)","label":"expression","children":[{"id":"logical_or_expression(123,128)","label":"logical_or_expression","children":[{"id":"logical_and_expression(123,128)","label":"logical_and_expression","children":[{"id":"inclusive_or_expression(123,128)","label":"inclusive_or_expression","children":[{"id":"exclusive_or_expression(123,128)","label":"exclusive_or_expression","children":[{"id":"bitwise_and_expression(123,128)","label":"bitwise_and_expression","children":[{"id":"equality_expression(123,128)","label":"equality_expression","children":[{"id":"comparison_expression(123,128)","label":"comparison_expression","children":[{"id":"shift_expression(123,125)","label":"shift_expression","children":[{"id":"additive_expression(123,125)","label":"additive_expression","children":[{"id":"multiplicative_expression(123,125)","label":"multiplicative_expression","children":[{"id":"unary_expression(123,124)","label":"unary_expression","children":[{"id":"identifier(123,124)","label":"identifier","children":[]}]}]}]}]},{"id":"op_lt(125,126)","label":"op_lt","children":[]},{"id":"shift_expression(127,128)","label":"shift_expression","children":[{"id":"additive_expression(127,128)","label":"additive_expression","children":[{"id":"multiplicative_expression(127,128)","label":"multiplicative_expression","children":[{"id":"unary_expression(127,128)","label":"unary_expression","children":[{"id":"identifier(127,128)","label":"identifier","children":[]}]}]}]}]}]}]}]}]}]}]}]}]},{"id":"statement(130,242)","label":"statement","children":[{"id":"block_statement(130,242)","label":"block_statement","children":[{"id":"statement(140,147)","label":"statement","children":[{"id":"expression(140,146)","label":"expression","children":[{"id":"assignment_expression(140,146)","label":"assignment_expression","children":[{"id":"identifier(140,141)","label":"identifier","children":[]},{"id":"assign_add(142,144)","label":"assign_add","children":[]},{"id":"expression(145,146)","label":"expression","children":[{"id":"logical_or_expression(145,146)","label":"logical_or_expression","children":[{"id":"logical_and_expression(145,146)","label":"logical_and_expression","children":[{"id":"inclusive_or_expression(145,146)","label":"inclusive_or_expression","children":[{"id":"exclusive_or_expression(145,146)","label":"exclusive_or_expression","children":[{"id":"bitwise_and_expression(145,146)","label":"bitwise_and_expression","children":[{"id":"equality_expression(145,146)","label":"equality_expression","children":[{"id":"comparison_expression(145,146)","label":"comparison_expression","children":[{"id":"shift_expression(145,146)","label":"shift_expression","children":[{"id":"additive_expression(145,146)","label":"additive_expression","children":[{"id":"multiplicative_expression(145,146)","label":"multiplicative_expression","children":[{"id":"unary_expression(145,146)","label":"unary_expression","children":[{"id":"int_literal(145,146)","label":"int_literal","children":[{"id":"dec_literal(145,146)","label":"dec_literal","children":[]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]},{"id":"statement(156,163)","label":"statement","children":[{"id":"expression(156,162)","label":"expression","children":[{"id":"assignment_expression(156,162)","label":"assignment_expression","children":[{"id":"identifier(156,157)","label":"identifier","children":[]},{"id":"assign_sub(158,160)","label":"assign_sub","children":[]},{"id":"expression(161,162)","label":"expression","children":[{"id":"logical_or_expression(161,162)","label":"logical_or_expression","children":[{"id":"logical_and_expression(161,162)","label":"logical_and_expression","children":[{"id":"inclusive_or_expression(161,162)","label":"inclusive_or_expression","children":[{"id":"exclusive_or_expression(161,162)","label":"exclusive_or_expression","children":[{"id":"bitwise_and_expression(161,162)","label":"bitwise_and_expression","children":[{"id":"equality_expression(161,162)","label":"equality_expression","children":[{"id":"comparison_expression(161,162)","label":"comparison_expression","children":[{"id":"shift_expression(161,162)","label":"shift_expression","children":[{"id":"additive_expression(161,162)","label":"additive_expression","children":[{"id":"multiplicative_expression(161,162)","label":"multiplicative_expression","children":[{"id":"unary_expression(161,162)","label":"unary_expression","children":[{"id":"int_literal(161,162)","label":"int_literal","children":[{"id":"dec_literal(161,162)","label":"dec_literal","children":[]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]},{"id":"statement(173,241)","label":"statement","children":[{"id":"if_statement(173,241)","label":"if_statement","children":[{"id":"expression(177,183)","label":"expression","children":[{"id":"logical_or_expression(177,183)","label":"logical_or_expression","children":[{"id":"logical_and_expression(177,183)","label":"logical_and_expression","children":[{"id":"inclusive_or_expression(177,183)","label":"inclusive_or_expression","children":[{"id":"exclusive_or_expression(177,183)","label":"exclusive_or_expression","children":[{"id":"bitwise_and_expression(177,183)","label":"bitwise_and_expression","children":[{"id":"equality_expression(177,183)","label":"equality_expression","children":[{"id":"comparison_expression(177,179)","label":"comparison_expression","children":[{"id":"shift_expression(177,179)","label":"shift_expression","children":[{"id":"additive_expression(177,179)","label":"additive_expression","children":[{"id":"multiplicative_expression(177,179)","label":"multiplicative_expression","children":[{"id":"unary_expression(177,178)","label":"unary_expression","children":[{"id":"identifier(177,178)","label":"identifier","children":[]}]}]}]}]}]},{"id":"op_eq(179,181)","label":"op_eq","children":[]},{"id":"comparison_expression(182,183)","label":"comparison_expression","children":[{"id":"shift_expression(182,183)","label":"shift_expression","children":[{"id":"additive_expression(182,183)","label":"additive_expression","children":[{"id":"multiplicative_expression(182,183)","label":"multiplicative_expression","children":[{"id":"unary_expression(182,183)","label":"unary_expression","children":[{"id":"int_literal(182,183)","label":"int_literal","children":[{"id":"dec_literal(182,183)","label":"dec_literal","children":[]}]}]}]}]}]}]}]}]}]}]}]}]}]},{"id":"statement(185,235)","label":"statement","children":[{"id":"block_statement(185,235)","label":"block_statement","children":[{"id":"statement(199,206)","label":"statement","children":[{"id":"expression(199,205)","label":"expression","children":[{"id":"assignment_expression(199,205)","label":"assignment_expression","children":[{"id":"identifier(199,200)","label":"identifier","children":[]},{"id":"assign_add(201,203)","label":"assign_add","children":[]},{"id":"expression(204,205)","label":"expression","children":[{"id":"logical_or_expression(204,205)","label":"logical_or_expression","children":[{"id":"logical_and_expression(204,205)","label":"logical_and_expression","children":[{"id":"inclusive_or_expression(204,205)","label":"inclusive_or_expression","children":[{"id":"exclusive_or_expression(204,205)","label":"exclusive_or_expression","children":[{"id":"bitwise_and_expression(204,205)","label":"bitwise_and_expression","children":[{"id":"equality_expression(204,205)","label":"equality_expression","children":[{"id":"comparison_expression(204,205)","label":"comparison_expression","children":[{"id":"shift_expression(204,205)","label":"shift_expression","children":[{"id":"additive_expression(204,205)","label":"additive_expression","children":[{"id":"multiplicative_expression(204,205)","label":"multiplicative_expression","children":[{"id":"unary_expression(204,205)","label":"unary_expression","children":[{"id":"int_literal(204,205)","label":"int_literal","children":[{"id":"dec_literal(204,205)","label":"dec_literal","children":[]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]},{"id":"statement(219,224)","label":"statement","children":[{"id":"break_statement(219,224)","label":"break_statement","children":[]}]},{"id":"statement(224,225)","label":"statement","children":[]}]}]}]}]}]}]}]}]},{"id":"statement(248,257)","label":"statement","children":[{"id":"return_statement(248,256)","label":"return_statement","children":[{"id":"expression(255,256)","label":"expression","children":[{"id":"logical_or_expression(255,256)","label":"logical_or_expression","children":[{"id":"logical_and_expression(255,256)","label":"logical_and_expression","children":[{"id":"inclusive_or_expression(255,256)","label":"inclusive_or_expression","children":[{"id":"exclusive_or_expression(255,256)","label":"exclusive_or_expression","children":[{"id":"bitwise_and_expression(255,256)","label":"bitwise_and_expression","children":[{"id":"equality_expression(255,256)","label":"equality_expression","children":[{"id":"comparison_expression(255,256)","label":"comparison_expression","children":[{"id":"shift_expression(255,256)","label":"shift_expression","children":[{"id":"additive_expression(255,256)","label":"additive_expression","children":[{"id":"multiplicative_expression(255,256)","label":"multiplicative_expression","children":[{"id":"unary_expression(255,256)","label":"unary_expression","children":[{"id":"int_literal(255,256)","label":"int_literal","children":[{"id":"dec_literal(255,256)","label":"dec_literal","children":[]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]},{"id":"EOI(259,259)","label":"EOI","children":[]}]},"ast":[{"Function":["Int","main",[],[{"Declaration":["Int","a"]},{"Assignment":["Simple","a",{"IntLiteral":0}]},{"Declaration":["Int","b"]},{"Assignment":["Simple","b",{"IntLiteral":30}]},{"Declaration":["Int","c"]},{"Assignment":["Simple","c",{"IntLiteral":10}]},{"WhileStatement":[true,{"BinaryExpression":["GreaterEqual",{"Identifier":"c"},{"IntLiteral":0}]},{"BlockStatement":[{"Assignment":["Simple","c",{"BinaryExpression":["Subtract",{"Identifier":"b"},{"Identifier":"c"}]}]}]}]},{"WhileStatement":[false,{"BinaryExpression":["LessThan",{"Identifier":"a"},{"Identifier":"b"}]},{"BlockStatement":[{"Assignment":["Addition","a",{"IntLiteral":1}]},{"Assignment":["Subtraction","b",{"IntLiteral":1}]},{"IfStatement":[{"BinaryExpression":["Equal",{"Identifier":"b"},{"IntLiteral":3}]},{"BlockStatement":[{"Assignment":["Addition","b",{"IntLiteral":2}]},"BreakStatement"]},{"BlockStatement":[]}]}]}]},{"ReturnStatement":{"IntLiteral":0}}]]}]}
const ast = data['ast']

const AST2VisualizationData = (ast) => {
    let id = 0
    const node2tree = (astNode) => {
        let nodeList = []
        for (const node of astNode) {
            id += 1
            let treeNode = {
                id: id.toString(),
                label: "",
                attrs: {},
                children: []
            }
            if (node === "BreakStatement" || node === "ContinueStatement") { // special statements
                treeNode.label = node
            } else for (const x in node) { // Actually there's only one entry inside
                treeNode.label = x
                switch (x) {
                    // basics
                    case "Assignment":
                        const [assignOperation, leftValue, assignChildren] = node[x]
                        treeNode.attrs = {
                            assignOperation,
                            leftValue
                        }
                        treeNode.children = node2tree([assignChildren])
                        break
                    case "Identifier":
                        treeNode.attrs = {
                            name: node[x]
                        }
                        break

                    // literals
                    case "IntLiteral":
                    case "BoolLiteral":
                    case "FloatLiteral":
                        treeNode.attrs = {
                            value: node[x]
                        }
                        break

                    // declarations
                    case "Declaration":
                        const [type, name] = node[x]
                        treeNode.attrs = {
                            type,
                            name
                        }
                        break
                    case "GlobalDeclaration":
                        const [globalType, globalName, globalAssignment] = node[x]
                        treeNode.attrs = {
                            type: globalType,
                            name: globalName
                        }
                        treeNode.children = node2tree([globalAssignment])
                        break

                    // Expressions
                    case "BinaryExpression":
                        const [binaryOperator, lhs, rhs] = node[x]
                        treeNode.attrs = {
                            binaryOperator
                        }
                        treeNode.children = node2tree([lhs, rhs])
                        break
                    case "UnaryExpression":
                        const [unaryOperator, unaryExpression] = node[x]
                        treeNode.attrs = {
                            unaryOperator
                        }
                        treeNode.children = node2tree([unaryExpression])
                        break

                    // functions
                    case "Function":
                        const [retType, funcName, parameters, funcChildren] = node[x]
                        id += 1
                        treeNode.attrs = {
                            functionName: funcName,
                            returnType: retType,
                            parameters
                        }
                        treeNode.children = node2tree(funcChildren)
                        break
                    case "ReturnStatement":
                        treeNode.children = node2tree([node[x]])
                        break
                    case "FunctionCall":
                        const [funcCallName, funcArguments] = node[x]
                        treeNode.attrs = {
                            functionName: funcCallName
                        }
                        treeNode.children = node2tree([{Arguments: funcArguments}])
                        break

                    // flow controls & statements
                    case "ForStatement":
                        const [initClause, condition, iteration, forStatement] = node[x]
                        treeNode.children = node2tree([{InitClause: initClause}, condition, iteration, forStatement])
                        break
                    case "WhileStatement":
                        const [isDoWhile, whileCondition, whileStatements] = node[x]
                        treeNode.attrs = {isDoWhile}
                        treeNode.children = node2tree([whileCondition, whileStatements])
                        break
                    case "IfStatement": // IfStatements is visualized as a list of BlockStatements
                    case "InitClause": // InitClause is a special form of BlockStatement
                    case "Arguments": // FuncCallArguments is a special form of BlockStatements
                    case "BlockStatement":
                        treeNode.children = node2tree(node[x])
                        break
                    case "BreakStatement":
                    case "ContinueStatement":
                        break

                    // unhandled case
                    default:
                        console.log(x)
                        console.log(node[x])
                }
            }
            nodeList.push(treeNode)
        }
        return nodeList
    }
    let tree = {
        id: id.toString(),
        label: "GNC",
        attrs: {
            remark: "AST Root Node"
        },
        children: node2tree(ast)
    }
    return tree
}


// console.log(JSON.stringify(tree, null, 2))
console.log(JSON.stringify(AST2VisualizationData(ast)))