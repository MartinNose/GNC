const data = {"error":false,"error_message":"","parse_tree":{"id":"gnc(0,106)","label":"gnc","children":[{"id":"function(0,105)","label":"function","children":[{"id":"data_type(0,3)","label":"data_type","children":[{"id":"int(0,3)","label":"int","children":[]}]},{"id":"identifier(4,8)","label":"identifier","children":[]},{"id":"function_parameter_list(8,10)","label":"function_parameter_list","children":[]},{"id":"statement(17,29)","label":"statement","children":[{"id":"declaration_statement(17,28)","label":"declaration_statement","children":[{"id":"data_type(17,20)","label":"data_type","children":[{"id":"int(17,20)","label":"int","children":[]}]},{"id":"identifier(21,22)","label":"identifier","children":[]},{"id":"expression(25,28)","label":"expression","children":[{"id":"logical_or_expression(25,28)","label":"logical_or_expression","children":[{"id":"logical_and_expression(25,28)","label":"logical_and_expression","children":[{"id":"inclusive_or_expression(25,28)","label":"inclusive_or_expression","children":[{"id":"exclusive_or_expression(25,28)","label":"exclusive_or_expression","children":[{"id":"bitwise_and_expression(25,28)","label":"bitwise_and_expression","children":[{"id":"equality_expression(25,28)","label":"equality_expression","children":[{"id":"comparison_expression(25,28)","label":"comparison_expression","children":[{"id":"shift_expression(25,28)","label":"shift_expression","children":[{"id":"additive_expression(25,28)","label":"additive_expression","children":[{"id":"multiplicative_expression(25,28)","label":"multiplicative_expression","children":[{"id":"unary_expression(25,28)","label":"unary_expression","children":[{"id":"int_literal(25,28)","label":"int_literal","children":[{"id":"dec_literal(25,28)","label":"dec_literal","children":[]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]},{"id":"statement(35,89)","label":"statement","children":[{"id":"for_statement(35,89)","label":"for_statement","children":[{"id":"declaration_statement(40,49)","label":"declaration_statement","children":[{"id":"data_type(40,43)","label":"data_type","children":[{"id":"int(40,43)","label":"int","children":[]}]},{"id":"identifier(44,45)","label":"identifier","children":[]},{"id":"expression(48,49)","label":"expression","children":[{"id":"logical_or_expression(48,49)","label":"logical_or_expression","children":[{"id":"logical_and_expression(48,49)","label":"logical_and_expression","children":[{"id":"inclusive_or_expression(48,49)","label":"inclusive_or_expression","children":[{"id":"exclusive_or_expression(48,49)","label":"exclusive_or_expression","children":[{"id":"bitwise_and_expression(48,49)","label":"bitwise_and_expression","children":[{"id":"equality_expression(48,49)","label":"equality_expression","children":[{"id":"comparison_expression(48,49)","label":"comparison_expression","children":[{"id":"shift_expression(48,49)","label":"shift_expression","children":[{"id":"additive_expression(48,49)","label":"additive_expression","children":[{"id":"multiplicative_expression(48,49)","label":"multiplicative_expression","children":[{"id":"unary_expression(48,49)","label":"unary_expression","children":[{"id":"int_literal(48,49)","label":"int_literal","children":[{"id":"dec_literal(48,49)","label":"dec_literal","children":[]}]}]}]}]}]}]}]}]}]}]}]}]}]}]},{"id":"expression(51,56)","label":"expression","children":[{"id":"logical_or_expression(51,56)","label":"logical_or_expression","children":[{"id":"logical_and_expression(51,56)","label":"logical_and_expression","children":[{"id":"inclusive_or_expression(51,56)","label":"inclusive_or_expression","children":[{"id":"exclusive_or_expression(51,56)","label":"exclusive_or_expression","children":[{"id":"bitwise_and_expression(51,56)","label":"bitwise_and_expression","children":[{"id":"equality_expression(51,56)","label":"equality_expression","children":[{"id":"comparison_expression(51,56)","label":"comparison_expression","children":[{"id":"shift_expression(51,53)","label":"shift_expression","children":[{"id":"additive_expression(51,53)","label":"additive_expression","children":[{"id":"multiplicative_expression(51,53)","label":"multiplicative_expression","children":[{"id":"unary_expression(51,52)","label":"unary_expression","children":[{"id":"identifier(51,52)","label":"identifier","children":[]}]}]}]}]},{"id":"op_lt(53,54)","label":"op_lt","children":[]},{"id":"shift_expression(55,56)","label":"shift_expression","children":[{"id":"additive_expression(55,56)","label":"additive_expression","children":[{"id":"multiplicative_expression(55,56)","label":"multiplicative_expression","children":[{"id":"unary_expression(55,56)","label":"unary_expression","children":[{"id":"identifier(55,56)","label":"identifier","children":[]}]}]}]}]}]}]}]}]}]}]}]}]},{"id":"expression(58,64)","label":"expression","children":[{"id":"assignment_expression(58,64)","label":"assignment_expression","children":[{"id":"identifier(58,59)","label":"identifier","children":[]},{"id":"assign_add(60,62)","label":"assign_add","children":[]},{"id":"expression(63,64)","label":"expression","children":[{"id":"logical_or_expression(63,64)","label":"logical_or_expression","children":[{"id":"logical_and_expression(63,64)","label":"logical_and_expression","children":[{"id":"inclusive_or_expression(63,64)","label":"inclusive_or_expression","children":[{"id":"exclusive_or_expression(63,64)","label":"exclusive_or_expression","children":[{"id":"bitwise_and_expression(63,64)","label":"bitwise_and_expression","children":[{"id":"equality_expression(63,64)","label":"equality_expression","children":[{"id":"comparison_expression(63,64)","label":"comparison_expression","children":[{"id":"shift_expression(63,64)","label":"shift_expression","children":[{"id":"additive_expression(63,64)","label":"additive_expression","children":[{"id":"multiplicative_expression(63,64)","label":"multiplicative_expression","children":[{"id":"unary_expression(63,64)","label":"unary_expression","children":[{"id":"int_literal(63,64)","label":"int_literal","children":[{"id":"dec_literal(63,64)","label":"dec_literal","children":[]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]},{"id":"statement(66,89)","label":"statement","children":[{"id":"block_statement(66,89)","label":"block_statement","children":[{"id":"statement(76,83)","label":"statement","children":[{"id":"expression(76,82)","label":"expression","children":[{"id":"assignment_expression(76,82)","label":"assignment_expression","children":[{"id":"identifier(76,77)","label":"identifier","children":[]},{"id":"assign_sub(78,80)","label":"assign_sub","children":[]},{"id":"expression(81,82)","label":"expression","children":[{"id":"logical_or_expression(81,82)","label":"logical_or_expression","children":[{"id":"logical_and_expression(81,82)","label":"logical_and_expression","children":[{"id":"inclusive_or_expression(81,82)","label":"inclusive_or_expression","children":[{"id":"exclusive_or_expression(81,82)","label":"exclusive_or_expression","children":[{"id":"bitwise_and_expression(81,82)","label":"bitwise_and_expression","children":[{"id":"equality_expression(81,82)","label":"equality_expression","children":[{"id":"comparison_expression(81,82)","label":"comparison_expression","children":[{"id":"shift_expression(81,82)","label":"shift_expression","children":[{"id":"additive_expression(81,82)","label":"additive_expression","children":[{"id":"multiplicative_expression(81,82)","label":"multiplicative_expression","children":[{"id":"unary_expression(81,82)","label":"unary_expression","children":[{"id":"int_literal(81,82)","label":"int_literal","children":[{"id":"dec_literal(81,82)","label":"dec_literal","children":[]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]},{"id":"statement(94,103)","label":"statement","children":[{"id":"return_statement(94,102)","label":"return_statement","children":[{"id":"expression(101,102)","label":"expression","children":[{"id":"logical_or_expression(101,102)","label":"logical_or_expression","children":[{"id":"logical_and_expression(101,102)","label":"logical_and_expression","children":[{"id":"inclusive_or_expression(101,102)","label":"inclusive_or_expression","children":[{"id":"exclusive_or_expression(101,102)","label":"exclusive_or_expression","children":[{"id":"bitwise_and_expression(101,102)","label":"bitwise_and_expression","children":[{"id":"equality_expression(101,102)","label":"equality_expression","children":[{"id":"comparison_expression(101,102)","label":"comparison_expression","children":[{"id":"shift_expression(101,102)","label":"shift_expression","children":[{"id":"additive_expression(101,102)","label":"additive_expression","children":[{"id":"multiplicative_expression(101,102)","label":"multiplicative_expression","children":[{"id":"unary_expression(101,102)","label":"unary_expression","children":[{"id":"int_literal(101,102)","label":"int_literal","children":[{"id":"dec_literal(101,102)","label":"dec_literal","children":[]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]},{"id":"EOI(106,106)","label":"EOI","children":[]}]},"ast":[{"Function":["Int","main",[],[{"Declaration":["Int","b"]},{"Assignment":["Simple","b",{"IntLiteral":255}]},{"ForStatement":[[{"Declaration":["Int","i"]},{"Assignment":["Simple","i",{"IntLiteral":0}]}],{"BinaryExpression":["LessThan",{"Identifier":"i"},{"Identifier":"b"}]},{"Assignment":["Addition","i",{"IntLiteral":1}]},{"BlockStatement":[{"Assignment":["Subtraction","b",{"IntLiteral":1}]}]}]},{"ReturnStatement":{"IntLiteral":0}}]]}]}
const ast = data['ast']

const node2tree = (astNode) => {
    let nodeList = []
    for (const node of astNode) {
        for (const x in node) { // Actually there's only one entry inside
            id += 1
            let treeNode = {
                id: id.toString(),
                label: x,
                attrs: {},
                children: []
            }
            switch (x) {
                case "Function":
                    const [retType, funcName, parameters, funcChildren] = node[x]
                    id += 1
                    treeNode.attrs = {
                        functionName: funcName,
                        returnType: retType,
                        parameters
                    }
                    treeNode.children = node2tree(funcChildren)
                    break
                case "ReturnStatement":
                    treeNode.children = node2tree([node[x]])
                    break
                case "IntLiteral":
                    treeNode.attrs = {
                        value: node[x]
                    }
                    break
                case "Declaration":
                    const [type, name] = node[x]
                    treeNode.attrs = {
                        type,
                        name
                    }
                    break
                case "Assignment":
                    const [assignOperation, leftValue, assignChildren] = node[x]
                    treeNode.attrs = {
                        assignOperation,
                        leftValue
                    }
                    treeNode.children = node2tree([assignChildren])
                    break
                case "Identifier":
                    treeNode.attrs = {
                        name: node[x]
                    }
                    break
                case "BinaryExpression":
                    const [binaryOperator, lhs, rhs] = node[x]
                    treeNode.attrs = {
                        binaryOperator
                    }
                    treeNode.children = node2tree([lhs, rhs])
                    break
                case "ForStatement":
                    const [initClause, condition, iteration, forStatement] = node[x]
                    treeNode.children = node2tree([{InitClause: initClause}, condition, iteration, forStatement])
                    break
                case "InitClause": // InitClause is a special form of BlockStatement
                case "BlockStatement":
                    treeNode.children = node2tree(node[x])
                    break
                default:
                    console.log(x)
            }
            nodeList.push(treeNode)
        }
    }
    return nodeList
}

let id = 0
let tree = {
    id: id.toString(),
    label: "GNC",
    attrs: {
        remark: "root node"
    },
    children: node2tree(ast)
}

// console.log(JSON.stringify(tree, null, 2))
console.log(JSON.stringify(tree))