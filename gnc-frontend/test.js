const data = {"error":false,"error_message":"","parse_tree":{"id":"gnc(0,160)","label":"gnc","children":[{"id":"function(1,160)","label":"function","children":[{"id":"data_type(1,4)","label":"data_type","children":[{"id":"int(1,4)","label":"int","children":[]}]},{"id":"identifier(5,9)","label":"identifier","children":[]},{"id":"function_parameter_list(9,11)","label":"function_parameter_list","children":[]},{"id":"statement(18,28)","label":"statement","children":[{"id":"declaration_statement(18,27)","label":"declaration_statement","children":[{"id":"data_type(18,21)","label":"data_type","children":[{"id":"int(18,21)","label":"int","children":[]}]},{"id":"identifier(22,23)","label":"identifier","children":[]},{"id":"expression(26,27)","label":"expression","children":[{"id":"logical_or_expression(26,27)","label":"logical_or_expression","children":[{"id":"logical_and_expression(26,27)","label":"logical_and_expression","children":[{"id":"inclusive_or_expression(26,27)","label":"inclusive_or_expression","children":[{"id":"exclusive_or_expression(26,27)","label":"exclusive_or_expression","children":[{"id":"bitwise_and_expression(26,27)","label":"bitwise_and_expression","children":[{"id":"equality_expression(26,27)","label":"equality_expression","children":[{"id":"comparison_expression(26,27)","label":"comparison_expression","children":[{"id":"shift_expression(26,27)","label":"shift_expression","children":[{"id":"additive_expression(26,27)","label":"additive_expression","children":[{"id":"multiplicative_expression(26,27)","label":"multiplicative_expression","children":[{"id":"unary_expression(26,27)","label":"unary_expression","children":[{"id":"int_literal(26,27)","label":"int_literal","children":[{"id":"dec_literal(26,27)","label":"dec_literal","children":[]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]},{"id":"statement(33,43)","label":"statement","children":[{"id":"declaration_statement(33,42)","label":"declaration_statement","children":[{"id":"data_type(33,36)","label":"data_type","children":[{"id":"int(33,36)","label":"int","children":[]}]},{"id":"identifier(37,38)","label":"identifier","children":[]},{"id":"expression(41,42)","label":"expression","children":[{"id":"logical_or_expression(41,42)","label":"logical_or_expression","children":[{"id":"logical_and_expression(41,42)","label":"logical_and_expression","children":[{"id":"inclusive_or_expression(41,42)","label":"inclusive_or_expression","children":[{"id":"exclusive_or_expression(41,42)","label":"exclusive_or_expression","children":[{"id":"bitwise_and_expression(41,42)","label":"bitwise_and_expression","children":[{"id":"equality_expression(41,42)","label":"equality_expression","children":[{"id":"comparison_expression(41,42)","label":"comparison_expression","children":[{"id":"shift_expression(41,42)","label":"shift_expression","children":[{"id":"additive_expression(41,42)","label":"additive_expression","children":[{"id":"multiplicative_expression(41,42)","label":"multiplicative_expression","children":[{"id":"unary_expression(41,42)","label":"unary_expression","children":[{"id":"int_literal(41,42)","label":"int_literal","children":[{"id":"dec_literal(41,42)","label":"dec_literal","children":[]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]},{"id":"statement(49,158)","label":"statement","children":[{"id":"if_statement(49,158)","label":"if_statement","children":[{"id":"expression(53,58)","label":"expression","children":[{"id":"logical_or_expression(53,58)","label":"logical_or_expression","children":[{"id":"logical_and_expression(53,58)","label":"logical_and_expression","children":[{"id":"inclusive_or_expression(53,58)","label":"inclusive_or_expression","children":[{"id":"exclusive_or_expression(53,58)","label":"exclusive_or_expression","children":[{"id":"bitwise_and_expression(53,58)","label":"bitwise_and_expression","children":[{"id":"equality_expression(53,58)","label":"equality_expression","children":[{"id":"comparison_expression(53,58)","label":"comparison_expression","children":[{"id":"shift_expression(53,55)","label":"shift_expression","children":[{"id":"additive_expression(53,55)","label":"additive_expression","children":[{"id":"multiplicative_expression(53,55)","label":"multiplicative_expression","children":[{"id":"unary_expression(53,54)","label":"unary_expression","children":[{"id":"identifier(53,54)","label":"identifier","children":[]}]}]}]}]},{"id":"op_gt(55,56)","label":"op_gt","children":[]},{"id":"shift_expression(57,58)","label":"shift_expression","children":[{"id":"additive_expression(57,58)","label":"additive_expression","children":[{"id":"multiplicative_expression(57,58)","label":"multiplicative_expression","children":[{"id":"unary_expression(57,58)","label":"unary_expression","children":[{"id":"identifier(57,58)","label":"identifier","children":[]}]}]}]}]}]}]}]}]}]}]}]}]},{"id":"statement(60,85)","label":"statement","children":[{"id":"block_statement(60,85)","label":"block_statement","children":[{"id":"statement(70,79)","label":"statement","children":[{"id":"return_statement(70,78)","label":"return_statement","children":[{"id":"expression(77,78)","label":"expression","children":[{"id":"logical_or_expression(77,78)","label":"logical_or_expression","children":[{"id":"logical_and_expression(77,78)","label":"logical_and_expression","children":[{"id":"inclusive_or_expression(77,78)","label":"inclusive_or_expression","children":[{"id":"exclusive_or_expression(77,78)","label":"exclusive_or_expression","children":[{"id":"bitwise_and_expression(77,78)","label":"bitwise_and_expression","children":[{"id":"equality_expression(77,78)","label":"equality_expression","children":[{"id":"comparison_expression(77,78)","label":"comparison_expression","children":[{"id":"shift_expression(77,78)","label":"shift_expression","children":[{"id":"additive_expression(77,78)","label":"additive_expression","children":[{"id":"multiplicative_expression(77,78)","label":"multiplicative_expression","children":[{"id":"unary_expression(77,78)","label":"unary_expression","children":[{"id":"int_literal(77,78)","label":"int_literal","children":[{"id":"dec_literal(77,78)","label":"dec_literal","children":[]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]},{"id":"statement(91,158)","label":"statement","children":[{"id":"if_statement(91,158)","label":"if_statement","children":[{"id":"expression(95,100)","label":"expression","children":[{"id":"logical_or_expression(95,100)","label":"logical_or_expression","children":[{"id":"logical_and_expression(95,100)","label":"logical_and_expression","children":[{"id":"inclusive_or_expression(95,100)","label":"inclusive_or_expression","children":[{"id":"exclusive_or_expression(95,100)","label":"exclusive_or_expression","children":[{"id":"bitwise_and_expression(95,100)","label":"bitwise_and_expression","children":[{"id":"equality_expression(95,100)","label":"equality_expression","children":[{"id":"comparison_expression(95,100)","label":"comparison_expression","children":[{"id":"shift_expression(95,97)","label":"shift_expression","children":[{"id":"additive_expression(95,97)","label":"additive_expression","children":[{"id":"multiplicative_expression(95,97)","label":"multiplicative_expression","children":[{"id":"unary_expression(95,96)","label":"unary_expression","children":[{"id":"identifier(95,96)","label":"identifier","children":[]}]}]}]}]},{"id":"op_lt(97,98)","label":"op_lt","children":[]},{"id":"shift_expression(99,100)","label":"shift_expression","children":[{"id":"additive_expression(99,100)","label":"additive_expression","children":[{"id":"multiplicative_expression(99,100)","label":"multiplicative_expression","children":[{"id":"unary_expression(99,100)","label":"unary_expression","children":[{"id":"identifier(99,100)","label":"identifier","children":[]}]}]}]}]}]}]}]}]}]}]}]}]},{"id":"statement(102,127)","label":"statement","children":[{"id":"block_statement(102,127)","label":"block_statement","children":[{"id":"statement(112,121)","label":"statement","children":[{"id":"return_statement(112,120)","label":"return_statement","children":[{"id":"expression(119,120)","label":"expression","children":[{"id":"logical_or_expression(119,120)","label":"logical_or_expression","children":[{"id":"logical_and_expression(119,120)","label":"logical_and_expression","children":[{"id":"inclusive_or_expression(119,120)","label":"inclusive_or_expression","children":[{"id":"exclusive_or_expression(119,120)","label":"exclusive_or_expression","children":[{"id":"bitwise_and_expression(119,120)","label":"bitwise_and_expression","children":[{"id":"equality_expression(119,120)","label":"equality_expression","children":[{"id":"comparison_expression(119,120)","label":"comparison_expression","children":[{"id":"shift_expression(119,120)","label":"shift_expression","children":[{"id":"additive_expression(119,120)","label":"additive_expression","children":[{"id":"multiplicative_expression(119,120)","label":"multiplicative_expression","children":[{"id":"unary_expression(119,120)","label":"unary_expression","children":[{"id":"int_literal(119,120)","label":"int_literal","children":[{"id":"dec_literal(119,120)","label":"dec_literal","children":[]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]},{"id":"statement(133,158)","label":"statement","children":[{"id":"block_statement(133,158)","label":"block_statement","children":[{"id":"statement(143,152)","label":"statement","children":[{"id":"return_statement(143,151)","label":"return_statement","children":[{"id":"expression(150,151)","label":"expression","children":[{"id":"logical_or_expression(150,151)","label":"logical_or_expression","children":[{"id":"logical_and_expression(150,151)","label":"logical_and_expression","children":[{"id":"inclusive_or_expression(150,151)","label":"inclusive_or_expression","children":[{"id":"exclusive_or_expression(150,151)","label":"exclusive_or_expression","children":[{"id":"bitwise_and_expression(150,151)","label":"bitwise_and_expression","children":[{"id":"equality_expression(150,151)","label":"equality_expression","children":[{"id":"comparison_expression(150,151)","label":"comparison_expression","children":[{"id":"shift_expression(150,151)","label":"shift_expression","children":[{"id":"additive_expression(150,151)","label":"additive_expression","children":[{"id":"multiplicative_expression(150,151)","label":"multiplicative_expression","children":[{"id":"unary_expression(150,151)","label":"unary_expression","children":[{"id":"int_literal(150,151)","label":"int_literal","children":[{"id":"dec_literal(150,151)","label":"dec_literal","children":[]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]},{"id":"EOI(160,160)","label":"EOI","children":[]}]},"ast":[{"Function":["Int","main",[],[{"Declaration":["Int","a"]},{"Assignment":["Simple","a",{"IntLiteral":0}]},{"Declaration":["Int","b"]},{"Assignment":["Simple","b",{"IntLiteral":1}]},{"IfStatement":[{"BinaryExpression":["GreaterThan",{"Identifier":"a"},{"Identifier":"b"}]},{"BlockStatement":[{"ReturnStatement":{"IntLiteral":1}}]},{"BlockStatement":[{"IfStatement":[{"BinaryExpression":["LessThan",{"Identifier":"a"},{"Identifier":"b"}]},{"BlockStatement":[{"ReturnStatement":{"IntLiteral":2}}]},{"BlockStatement":[{"ReturnStatement":{"IntLiteral":3}}]}]}]}]}]]}]}
const ast = data['ast']

const node2tree = (astNode) => {
    let nodeList = []
    for (const node of astNode) {
        for (const x in node) { // Actually there's only one entry inside
            id += 1
            let treeNode = {
                id: id.toString(),
                label: x,
                attrs: {},
                children: []
            }
            switch (x) {
                case "Function":
                    const [retType, funcName, parameters, funcChildren] = node[x]
                    id += 1
                    treeNode.attrs = {
                        functionName: funcName,
                        returnType: retType,
                        parameters
                    }
                    treeNode.children = node2tree(funcChildren)
                    break
                case "ReturnStatement":
                    treeNode.children = node2tree([node[x]])
                    break
                case "IntLiteral":
                    treeNode.attrs = {
                        value: node[x]
                    }
                    break
                case "Declaration":
                    const [type, name] = node[x]
                    treeNode.attrs = {
                        type,
                        name
                    }
                    break
                case "GlobalDeclaration":
                    const [globalType, globalName, globalAssignment] = node[x]
                    treeNode.attrs = {
                        type: globalType,
                        name: globalName
                    }
                    treeNode.children = node2tree([globalAssignment])
                    break
                case "Assignment":
                    const [assignOperation, leftValue, assignChildren] = node[x]
                    treeNode.attrs = {
                        assignOperation,
                        leftValue
                    }
                    treeNode.children = node2tree([assignChildren])
                    break
                case "Identifier":
                    treeNode.attrs = {
                        name: node[x]
                    }
                    break
                case "BinaryExpression":
                    const [binaryOperator, lhs, rhs] = node[x]
                    treeNode.attrs = {
                        binaryOperator
                    }
                    treeNode.children = node2tree([lhs, rhs])
                    break
                case "ForStatement":
                    const [initClause, condition, iteration, forStatement] = node[x]
                    treeNode.children = node2tree([{InitClause: initClause}, condition, iteration, forStatement])
                    break
                case "InitClause": // InitClause is a special form of BlockStatement
                case "Arguments": // FuncCallArguments is a special form of BlockStatement
                case "BlockStatement":
                    treeNode.children = node2tree(node[x])
                    break
                case "FunctionCall":
                    const [funcCallName, funcArguments] = node[x]
                    treeNode.attrs = {
                        functionName: funcCallName
                    }
                    treeNode.children = node2tree([{Arguments: funcArguments}])
                    break
                case "WhileStatement":
                    const [isDoWhile, whileCondition, whileStatements] = node[x]
                    treeNode.attrs = {isDoWhile}
                    treeNode.children = node2tree([whileCondition, whileStatements])
                    break
                case "IfStatement":
                    treeNode.children = node2tree(node[x])
                    break
                default:
                    console.log(x)
                    console.log(node[x])
            }
            nodeList.push(treeNode)
        }
    }
    return nodeList
}

let id = 0
let tree = {
    id: id.toString(),
    label: "GNC",
    attrs: {
        remark: "AST Root Node"
    },
    children: node2tree(ast)
}

// console.log(JSON.stringify(tree, null, 2))
console.log(JSON.stringify(tree))